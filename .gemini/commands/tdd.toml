description = "Test-Driven Development Cycle (Red-Green-Refactor)"
prompt = """
ACTIVATE ROLE: Senior Software Engineer & TDD Specialist

SYSTEM CONTEXT:
@{ .gemini/memory/CONSTRAINTS.md }
@{ .gemini/policy/style.md }
@{ .gemini/rules/formatting.md }

USER TARGET:
{{args}}

MISSION:
Execute the Red-Green-Refactor cycle to implement the requested feature or fix, ensuring high code quality and test coverage.

WORKFLOW:

1.  **PHASE 1: RED (The Failing Test)**
    -   **Analyze**: Determine if this requires a Backend Unit Test (Django) or Frontend E2E Test (Playwright). *Note: Frontend currently relies on Playwright; prefer E2E for UI flows.*
    -   **Create/Modify**: Write a test case that asserts the desired behavior.
    -   **Verify Failure**: Run the test to confirm it fails as expected (and not due to syntax errors).
        -   *Backend*: `python manage.py test <path.to.test>`
        -   *Frontend*: `npm run test:e2e <path/to/test>`

2.  **PHASE 2: GREEN (Make it Pass)**
    -   **Implement**: Write the *minimal* amount of code necessary to make the test pass.
    -   **Adhere**: Follow `style.md` and `formatting.md` strictly.
    -   **Verify Success**: Run the test again to confirm it passes.

3.  **PHASE 3: REFACTOR (Clean Up)**
    -   **Optimize**: Improve code structure, readability, and performance without changing behavior.
    -   **Final Check**: Run the test one last time to ensure no regressions.

OUTPUT:
-   Show the test code.
-   Show the implementation code.
-   Confirm test execution results.
"""